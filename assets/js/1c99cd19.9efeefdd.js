"use strict";(self.webpackChunkprog_2_web=self.webpackChunkprog_2_web||[]).push([[8820],{3905:(e,a,n)=>{n.d(a,{Zo:()=>u,kt:()=>g});var r=n(7294);function t(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function o(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?o(Object(n),!0).forEach((function(a){t(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function l(e,a){if(null==e)return{};var n,r,t=function(e,a){if(null==e)return{};var n,r,t={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],a.indexOf(n)>=0||(t[n]=e[n]);return t}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}var s=r.createContext({}),c=function(e){var a=r.useContext(s),n=a;return e&&(n="function"==typeof e?e(a):i(i({},a),e)),n},u=function(e){var a=c(e.components);return r.createElement(s.Provider,{value:a},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var a=e.children;return r.createElement(r.Fragment,{},a)}},d=r.forwardRef((function(e,a){var n=e.components,t=e.mdxType,o=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=c(n),d=t,g=p["".concat(s,".").concat(d)]||p[d]||m[d]||o;return n?r.createElement(g,i(i({ref:a},u),{},{components:n})):r.createElement(g,i({ref:a},u))}));function g(e,a){var n=arguments,t=a&&a.mdxType;if("string"==typeof e||t){var o=n.length,i=new Array(o);i[0]=d;var l={};for(var s in a)hasOwnProperty.call(a,s)&&(l[s]=a[s]);l.originalType=e,l[p]="string"==typeof e?e:t,i[1]=l;for(var c=2;c<o;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},7749:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>s,contentTitle:()=>i,default:()=>m,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var r=n(7462),t=(n(7294),n(3905));const o={sidebar_label:"Programaci\xf3n multi-hilo",slug:"/clases/concurrencia/apuntes/multihilo",hide_table_of_contents:!1,hide_title:!0,author:"Mauricio Cerizza",authorURL:"https://github.com/mauricioCerizza"},i=void 0,l={unversionedId:"clases/concurrencia/Apuntes/multihilo",id:"clases/concurrencia/Apuntes/multihilo",title:"multihilo",description:"Programaci\xf3n multi-hilo",source:"@site/docs/clases/19-concurrencia/Apuntes/01-multihilo.md",sourceDirName:"clases/19-concurrencia/Apuntes",slug:"/clases/concurrencia/apuntes/multihilo",permalink:"/utn-prog-ii/docs/clases/concurrencia/apuntes/multihilo",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/clases/19-concurrencia/Apuntes/01-multihilo.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_label:"Programaci\xf3n multi-hilo",slug:"/clases/concurrencia/apuntes/multihilo",hide_table_of_contents:!1,hide_title:!0,author:"Mauricio Cerizza",authorURL:"https://github.com/mauricioCerizza"}},s={},c=[{value:"Programaci\xf3n multi-hilo",id:"programaci\xf3n-multi-hilo",level:2},{value:"Multitarea apropiativa",id:"multitarea-apropiativa",level:3},{value:"Programaci\xf3n en paralelo",id:"programaci\xf3n-en-paralelo",level:3},{value:"Resumen de la secci\xf3n",id:"resumen-de-la-secci\xf3n",level:2}],u={toc:c},p="wrapper";function m(e){let{components:a,...n}=e;return(0,t.kt)(p,(0,r.Z)({},u,n,{components:a,mdxType:"MDXLayout"}),(0,t.kt)("h2",{id:"programaci\xf3n-multi-hilo"},"Programaci\xf3n multi-hilo"),(0,t.kt)("p",null,"Un ",(0,t.kt)("strong",{parentName:"p"},"proceso")," es un programa en ejecuci\xf3n que tiene asignados recursos tales como memoria e hilos. "),(0,t.kt)("p",null,"Un ",(0,t.kt)("strong",{parentName:"p"},"hilo <",(0,t.kt)("em",{parentName:"strong"},"thread"),">"),", tambi\xe9n llamado hebra o subproceso, es la unidad b\xe1sica a la que un sistema operativo asigna tiempo de procesamiento. Son los encargados de ejecutar nuestro c\xf3digo sentencia a sentencia. "),(0,t.kt)("p",null,"Por defecto cada proceso tiene un \xfanico hilo, es decir, s\xf3lo puede procesar una tarea a la vez. La ",(0,t.kt)("strong",{parentName:"p"},"programaci\xf3n multi-hilo <",(0,t.kt)("em",{parentName:"strong"},"multithreaded programming"),">")," permite que un proceso se ejecute sobre m\xfaltiples hilos y cada uno de esos hilos est\xe9 realizando una tarea distinta en paralelo. "),(0,t.kt)("p",null,"Todos los hilos de un mismo proceso comparten los mismos recursos asignados por el sistema operativo."),(0,t.kt)("h3",{id:"multitarea-apropiativa"},"Multitarea apropiativa"),(0,t.kt)("p",null,"Por cada n\xfacleo de la CPU, se puede ejecutar a lo mucho un proceso en cada momento. Windows y otros sistemas operativos modernos simulan la ejecuci\xf3n paralela de tareas dividiendo el tiempo de procesamiento entre los hilos, permitiendo que se vayan ejecutando uno despu\xe9s de otro en peque\xf1as fracciones de tiempo. El hilo que se est\xe1 ejecutando es suspendido cuando termina su fracci\xf3n de tiempo, luego el procesador permite que otro hilo se ejecute por el mismo periodo de tiempo. Esta forma de simular el paralelismo recibe el nombre de ",(0,t.kt)("strong",{parentName:"p"},"multitarea apropiativa <",(0,t.kt)("em",{parentName:"strong"},"preemptive multitasking"),">"),". "),(0,t.kt)("p",null,"Cuando Windows cambia de un hilo a otro, guarda el contexto donde se ejecut\xf3 el hilo actual y recarga el contexto del pr\xf3ximo hilo en la cola de ejecuci\xf3n. Hay que ser conscientes de que esto tambi\xe9n consume tiempo y recursos. "),(0,t.kt)("admonition",{title:"Advertencia",type:"caution"},(0,t.kt)("p",{parentName:"admonition"},"No siempre tener m\xe1s hilos va a mejorar el rendimiento, se deben realizar pruebas de rendimiento comparando la ejecuci\xf3n de procesos con y sin m\xfaltiples hilos.")),(0,t.kt)("p",null,"Cada hilo tiene una ",(0,t.kt)("strong",{parentName:"p"},"pila de ejecuci\xf3n <",(0,t.kt)("em",{parentName:"strong"},"call stack"),">")," independiente, esto significa que cada uno maneja su propia secuencia de funciones a ejecutar. "),(0,t.kt)("p",null,"En algunos tipos de aplicaci\xf3n existen hilos especiales, por ejemplo un hilo para la interfaz de usuario <",(0,t.kt)("em",{parentName:"p"},"UI Thread"),"> o el hilo principal en los programas de consola <",(0,t.kt)("em",{parentName:"p"},"Main Thread"),">."),(0,t.kt)("p",null,"IMAGEN - proceso, hilos, call stack y memoria"),(0,t.kt)("p",null,"Todas las aplicaciones de .NET tienen un ",(0,t.kt)("strong",{parentName:"p"},"conjunto de hilos <",(0,t.kt)("em",{parentName:"strong"},"thread pool"),">")," que se encarga de mantener un n\xfamero de hilos activos esperando para ejecutar cualquier trabajo que se requiera. Lo podemos ver como un lugar donde podemos poner en cola tareas a realizar y que se ajustar\xe1 autom\xe1ticamente de acuerdo a la demanda."),(0,t.kt)("p",null,"En .NET se sol\xeda utilizar la clase ",(0,t.kt)("strong",{parentName:"p"},(0,t.kt)("em",{parentName:"strong"},"Thread"))," para trabajar con hilos, la cual es una abstracci\xf3n de bajo nivel. El ",(0,t.kt)("em",{parentName:"p"},"conjunto de hilos")," es una abstracci\xf3n de un nivel un poco m\xe1s alto, ya que se encargar\xe1 por si mismo de instanciar un hilo si existe la necesidad. Actualmente no se recomienda crear instancias de ",(0,t.kt)("strong",{parentName:"p"},(0,t.kt)("em",{parentName:"strong"},"Thread"))," ya que existen nuevas soluciones que fueron afinadas para cubrir de forma eficiente y sencilla la gran mayor\xeda de los escenarios reales."),(0,t.kt)("p",null,"Las clases con las que trabajaremos son abstracciones de alto nivel que ponen en cola trabajo para que sea resuelto por el ",(0,t.kt)("em",{parentName:"p"},"conjunto de hilos"),". "),(0,t.kt)("p",null,"IMAGEN - thread vs thread pool vs high level abstractions"),(0,t.kt)("h3",{id:"programaci\xf3n-en-paralelo"},"Programaci\xf3n en paralelo"),(0,t.kt)("p",null,"La ",(0,t.kt)("strong",{parentName:"p"},"programaci\xf3n en paralelo <",(0,t.kt)("em",{parentName:"strong"},"parallel programming"),">")," es un tipo de programaci\xf3n multi-hilo, que a su vez es una forma de concurrencia. Se utiliza cuando se necesita dividir una gran carga de trabajo computacional en partes independientes y ejecutarlas en paralelo, maximizando el uso de los n\xfacleos de la CPU."),(0,t.kt)("admonition",{title:"IMPORTANTE",type:"important"},(0,t.kt)("p",{parentName:"admonition"},"Cuando procesamos en paralelo cada fragmento de trabajo de ser tan independiente del resto como sea posible. ")),(0,t.kt)("p",null,"IMAGEN - ejemplo en la cocina"),(0,t.kt)("p",null,"Existen dos formas de paralelismo: data parallelism y task parallelism"),(0,t.kt)("p",null,"IMAGEN - tipos de concurrencia y subtipos"),(0,t.kt)("p",null,(0,t.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/dotnet/standard/parallel-programming/task-based-asynchronous-programming"},"https://docs.microsoft.com/en-us/dotnet/standard/parallel-programming/task-based-asynchronous-programming")),(0,t.kt)("p",null,"Parallel.ForEach"),(0,t.kt)("p",null,"Task.Run"),(0,t.kt)("p",null,"Colecciones concurrentes"),(0,t.kt)("h2",{id:"resumen-de-la-secci\xf3n"},"Resumen de la secci\xf3n"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"\xbfQu\xe9 significa concurrencia?"),(0,t.kt)("li",{parentName:"ul"},"\xbfQu\xe9 formas de concurrencia existen y cu\xe1ndo se usa cada una?")))}m.isMDXComponent=!0}}]);